--------------------------------------------------------
--  File created - szombat-április-06-2024   
--------------------------------------------------------
DROP TABLE "WEBSHOP"."COUPONS" cascade constraints;
DROP TABLE "WEBSHOP"."USERS" cascade constraints;
DROP TABLE "WEBSHOP"."COUPONS" cascade constraints;
--------------------------------------------------------
--  DDL for Table COUPONS
--------------------------------------------------------

  CREATE TABLE "WEBSHOP"."COUPONS" 
   (	"COUPONID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"CODE" VARCHAR2(255 BYTE), 
	"DISCOUNT" NUMBER(5,2), 
	"USERID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USERS
--------------------------------------------------------

  CREATE TABLE "WEBSHOP"."USERS" 
   (	"USERID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NAME" VARCHAR2(255 BYTE), 
	"EMAIL" VARCHAR2(255 BYTE), 
	"PHONENUMBER" VARCHAR2(20 BYTE), 
	"ISADMIN" CHAR(1 BYTE), 
	"PASSWORDHASH" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table COUPONS
--------------------------------------------------------

  CREATE TABLE "WEBSHOP"."COUPONS" 
   (	"COUPONID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"CODE" VARCHAR2(255 BYTE), 
	"DISCOUNT" NUMBER(5,2), 
	"USERID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into WEBSHOP.COUPONS
SET DEFINE OFF;
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('1','WELCOME10','10','1');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('2','SPRING20','20','2');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('3','SUMMER15','15','3');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('4','FALL10','10','4');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('5','WINTER20','20','5');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('6','VIPCUSTOMER','25','6');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('7','BLACKFRIDAY30','30','7');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('8','CYBERMONDAY25','25','8');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('9','HAPPY2024','20,24','9');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('10','10OFF','10','10');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('11','20OFF','20','11');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('12','FIRSTBUY5','5','12');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('13','STUDENT10','10','13');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('14','TECHLOVE15','15','14');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('15','GADGETGURU10','10','15');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('16','NEWYEAR20','20','16');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('17','EASTER15','15','17');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('18','THANKYOU10','10','18');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('19','BIRTHDAY20','20','19');
Insert into WEBSHOP.COUPONS (COUPONID,CODE,DISCOUNT,USERID) values ('20','ANNIVERSARY15','15','20');
--------------------------------------------------------
--  DDL for Index SYS_C007376
--------------------------------------------------------

  CREATE UNIQUE INDEX "WEBSHOP"."SYS_C007376" ON "WEBSHOP"."COUPONS" ("COUPONID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C007377
--------------------------------------------------------

  CREATE UNIQUE INDEX "WEBSHOP"."SYS_C007377" ON "WEBSHOP"."COUPONS" ("CODE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  Constraints for Table COUPONS
--------------------------------------------------------

  ALTER TABLE "WEBSHOP"."COUPONS" MODIFY ("COUPONID" NOT NULL ENABLE);
  ALTER TABLE "WEBSHOP"."COUPONS" ADD PRIMARY KEY ("COUPONID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "WEBSHOP"."COUPONS" ADD UNIQUE ("CODE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table COUPONS
--------------------------------------------------------

  ALTER TABLE "WEBSHOP"."COUPONS" ADD CONSTRAINT "FK_COUPONS_USERS" FOREIGN KEY ("USERID")
	  REFERENCES "WEBSHOP"."USERS" ("USERID") ON DELETE SET NULL ENABLE;
